<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <title>fzf404ï½œCTF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="https://img.fzf404.art/favicon.ico" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sedom/dist/sedom.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/sedom/dist/sedom.min.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?35a26dead5e790cb29ec1d40fdde8f14";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>

<body>
  <h2>å¤ºæ——èµ› ğŸ‰</h2>
  <h4>QinLi Studio 2022 CTF ğŸ</h4>
  <code>
      docker run -itd -h qlstudio -p 30022:22 fzf404/ctf bash
      ssh ql@localhost -p 30022
      password: qlstudio
  </code>
  <hr />
  <p>
    <button id="flag" class="red">01-flag</button>
    <button id="hide" class="orange">02-hide</button>
    <button id="find" class="yellow">03-find</button>
    <button id="unzip" class="green">04-unzip</button>
  </p>
  <p>
    <button id="access" class="cyan">05-access</button>
    <button id="python" class="indigo">06-python</button>
    <button id="nginx" class="purple">07-nginx</button>
  </p>
  <hr />
  <form class="space">
    <label for="mark">æ ‡è®°</label>
    <input id="mark" type="text" placeholder="è¯·è¾“å…¥æ ‡è®°" />
    <button id="submit" class="blue">æäº¤</button>
  </form>
  <h6 class="space">
    <a class="right blue" href="..">è¿”å›</a>
    <a id="reset" class="right pink">æ¸…ç©º</a>
  </h6>
  <button class="theme">ğŸŒ“</button>
  <script>
    // æˆç»©
    let score = 0
    // è¾“å…¥æ¡†
    const input = document.getElementById('mark')

    // éªŒè¯æ ‡è®°
    function verify(flag) {
      fetch('flag/' + flag).then(res => res.json()).then(data => {
        // éªŒè¯æˆåŠŸ
        score += 1
        // ä¿å­˜ç­”æ¡ˆ
        localStorage.setItem(data, flag)
        // è°ƒæ•´åŠ¨ç”»
        document.getElementById(data).setAttribute('class', 'rainbow')
        // å®Œæˆå…¨éƒ¨
        if (score === 7) {
          // é—ªçƒåŠ¨ç”»
          const flash = setInterval(() => {
            Sedom.toggleTheme()
          }, 300)
          // åœæ­¢é—ªçƒ
          setTimeout(() => {
            clearInterval(flash)
          }, 2000)
        }
      }).catch(err => input.setAttribute('placeholder', 'æ ‡è®°é”™è¯¯'))
    }

    // é‡ç½®æ ‡è®°
    function reset() {
      localStorage.clear()
      location.reload()
    }

    // è¯»å–æ ‡è®°
    function init() {
      localStorage.hasOwnProperty('flag') && verify(localStorage.getItem('flag'))
      localStorage.hasOwnProperty('hide') && verify(localStorage.getItem('hide'))
      localStorage.hasOwnProperty('find') && verify(localStorage.getItem('find'))
      localStorage.hasOwnProperty('unzip') && verify(localStorage.getItem('unzip'))
      localStorage.hasOwnProperty('access') && verify(localStorage.getItem('access'))
      localStorage.hasOwnProperty('python') && verify(localStorage.getItem('python'))
      localStorage.hasOwnProperty('nginx') && verify(localStorage.getItem('nginx'))

      // æäº¤æ ‡è®°
      document.getElementById('submit').addEventListener('click', (event) => {
        // é˜»æ­¢é»˜è®¤äº‹ä»¶
        event.preventDefault()

        // è·å–æ ‡è®°
        const flag = input.value

        // æ¸…ç©ºæ ‡è®°
        input.value = ''

        // éªŒè¯æ ‡è®°
        if (flag.length === 8) {
          verify(flag)
        } else {
          input.setAttribute('placeholder', 'æ ‡è®°åº”ä¸º8ä½')
        }
      })

      // æ¸…ç©ºæ ‡è®°
      document.getElementById('reset').addEventListener('click', reset)
    }

    // åˆå§‹åŒ–
    init()
  </script>
</body>

</html>